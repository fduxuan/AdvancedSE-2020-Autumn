swagger: "2.0"
info:
  description: "The Api Document of StarChair"
  version: "1.0.0"
  title: "Api of StarChair"
host: "10.177.44.234:7001"
basePath: "/v2"
tags:
- name: "Admin Manage Conference Service"
  description: "Service for admin to manage the conference"
- name: "Apply Meeting Service"
  description: "Service for user to apply the conference"
- name: "Begin Examine Scripts Service"
  description: "Service for start review"
- name: "Confirm Finish Service"
  description: "Service for chairman to finish the review"
- name: "Discussion Service"
  description: "Service for manage discussion"
- name: "End Examine Manuscripts Service"
  description: "Service for finish review"
- name: "Examine Manuscripts Service"
  description: "Service for manage review"
- name: "Get Invitation Sent Service"
  description: "Service for get invitations from yourself"
- name: "Get My Meeting Application Service"
  description: "Service for get all meeting applications that applied by yourself"
- name: "Invite Pc Service"
  description: "Service for searching pc users"
- name: "Modify Article Info Service"
  description: "modify author infomation"
- name: "Paper Submit Service"
  description: "Service for submiing articles"
- name: "Rebuttal Service"
  description: "rebuttal your article"
- name: "Register Login Service"
  description: "Service for registing and login"
- name: "Release Final Result Service"
  description: "Service for release final result"
- name: "Release First Result Service"
  description: "Service for release first result"
- name: "Start Submit Service"
  description: "start submit articles"
schemes:
- "https"
- "http"
paths:
  /getUncheckedConference:
    get:
      tags: 
      -  "Admin Manage Conference Service"
      summary: "Get unchecked conference"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
              type: "array"
              items:
                $ref: "#/definitions/Topic"
  /changeApplicationStatus:
    post:
      tags: 
      -  "Admin Manage Conference Service"
      summary: "Change the status of conference"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - in: "body"
        name: "body"
        required: true
        schema:
          type: "object"
          properties:
            applicationId:
              type: "string"
            applyStatus:
              type: "string"
        
      responses:
        "200":
          description: "OK"
          schema:
              type: "array"
              items:
                $ref: "#/definitions/Meeting"      
  /applyConference:
    post:
      tags: 
      -  "Apply Meeting Service"
      summary: "Apply a conference"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - in: "body"
        name: "body"
        required: true
        schema:
          type: "object"
          properties:
            shortenForm:
              type: "string"
            fullName:
              type: "string"
            time:
              type: "string"
            location:
              type: "string"
            ddl:
              type: "string"
            publishingTime:
              type: "string"
            applicant:
              type: "string" 
            topic:
              type: "array"
              items: 
                type: "string"
      responses:
        "200":
          description: "OK"
          schema:
            $ref: "#/definitions/Meeting" 
  /getPcList:
    get:
      tags: 
      -  "Begin Examine Scripts Service"
      summary: "Find pcmember of the meeting"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      
      responses:
        "200":
          description: "OK"
          schema:
            type: "object"
            properties:
              userDetails:
                type: "array"
                items: 
                   $ref: "#/definitions/User"
              topicDetails:
                type: "array"
                items: 
                   $ref: "#/definitions/Topic"
              submitStatus:
                type: "string"
  /startReview:
    get:
      tags: 
      -  "Begin Examine Scripts Service"
      summary: "Start Review"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      - name: "strategy"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "object"
            properties:
              message:
                type: "string"
  /viewAllArticles:
    get:
      tags: 
      -  "Begin Examine Scripts Service"
      summary: "View all articles"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "object"
            properties:
              message:
                type: "array"
                items:
                  $ref: "#/definitions/Article"
  /userConf:
    get:
      tags: 
      -  "Begin Examine Scripts Service"
      summary: "Get all meetings I have joined"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "username"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Meeting"
  /getAuthorityList:
    get:
      tags: 
      -  "Begin Examine Scripts Service"
      summary: "Get the authorities of the user in the meeting"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "id"
        type: "string"
        in: "query"
        required: true
      - name: "username"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Authority"
  /confirmFinish:
    get:
      tags: 
      - "Confirm Finish Service"
      summary: "Finish Submitting"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "object"
            properties:
              message:
                type: "string"
  /discussion:
    get:
      tags: 
      - "Discussion Service"
      summary: "Get discussion info"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "articleId"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Main_Discussion"
  /newPost:
    post:
      tags: 
      - "Discussion Service"
      summary: "Create a post"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "body"
        in: "body"
        required: true
        schema:
          type: "object"
          properties:
            articleId:
              type: "string"
            username:
              type: "string"
            content:
              type: "string"
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Main_Discussion"
  /newComment:
    post:
      tags: 
      - "Discussion Service"
      summary: "Create a comment"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "body"
        in: "body"
        required: true
        schema:
          type: "object"
          properties:
            articleId:
              type: "string"
            username:
              type: "string"
            mainId:
              type: "string"
            content:
              type: "string"
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Main_Discussion"
  /replyComment:
    post:
      tags: 
      - "Discussion Service"
      summary: "Reply comment"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "body"
        in: "body"
        required: true
        schema:
          type: "object"
          properties:
            articleId:
              type: "string"
            username:
              type: "string"
            content:
              type: "string"
            subId:
              type: "string"
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              $ref: "#/definitions/Main_Discussion"
  /finishReview:
    get:
      tags: 
      - "End Examine Manuscripts Service"
      summary: "Finish review and create discussion"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
  /getAllotedArticle:
    get:
      tags: 
      - "Examine Manuscripts Service"
      summary: "Get all allocated article"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      - name: "username"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "object"
            properties:
              articleList:
                type: "array"
                items: 
                  $ref: "#/definitions/Article"
              submitStatus:
                type: "string"
  /submitScore:
    get:
      tags: 
      - "Examine Manuscripts Service"
      summary: "Submit score"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "body"
        in: "body"
        required: true
        schema:
          type: "object"
          properties:
            articleId:
              type: "string"
            username:
              type: "string"
            score:
              type: "string"
            comment:
              type: "string"
            confidence:
              type: "string"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
  /invitationISent:
    get:
      tags: 
      - "Get Invitation Sent Service"
      summary: "Get invitation from yourself"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "username"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "object"
            properties:
              meetingDetails:
                type: "array"
                items: 
                  $ref: "#/definitions/Meeting"
              inviteeDetails:
                type: "array"
                items: 
                  $ref: "#/definitions/User"
              invitationDetails:
                type: "array"
                items: 
                  $ref: "#/definitions/Invitation"
              topicDetails:
                type: "array"
                items: 
                  $ref: "#/definitions/Topic"
  /myApplication:
    get:
      tags: 
      - "Get My Meeting Application Service"
      summary: "get applications that I applied"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters: 
      - name: "username"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items: 
              $ref: "#/definitions/Meeting"
              
  /searchUserInfo:
    get:
      tags: 
      - "Invite Pc Service"
      summary: "get user list from posting fullname"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - name: "fullName"
        type: "string"
        in: "query"
        required: true
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items: 
              $ref: "#/definitions/User"
  
  /sendInvitation:
    post:
      tags:
      - "Invite Pc Service"
      summary: "send invitations to all invited pcs"
      parameters: 
      - name: "body"
        in: "body"
        required: true
        schema:
          type: "object"
          properties:
            meetingID:
              type: "string"
            inviter:
              type: "string"
            invitee:
              type: "array"
              items:
                $ref: '#/definitions/User/properties/id'
      responses:
        200:
          description: OK
          schema: 
            type: "string"
            description: 'success'
            
  /modifyAuthor:
    post:
      tags: 
      - "Modify Article Info Service"
      summary: "change article's infomation"
      parameters:
      - name: 'body'
        in: 'body'
        schema:
          type: "object"
          properties:
            templateFile:
              type: "object"
            articleName:
              type: "string"
            author:
              type: "string"
            summary: 
              type: "string"
            topics:
              type: "array"
              items:
                $ref: '#/definitions/Topic/properties/id'
            username:
              type: "string"
            meetingId:
              type: "string"
      responses:
        200:
          description: OK
  
  /getAllPassedMeetings:
    get:
      tags:
      - Paper Submit Service
      summary: "get all passed meetings"
      responses:
        200:
          description: OK
          schema:
            type: 'array'
            items: 
              $ref: '#/definitions/Meeting'
    
  /checkIfChair:
    get:
      tags:
      - Paper Submit Service
      summary: "check if user is chair of this meeting"
      parameters:
      - name: "username"
        type: "string"
        in: "query"
        required: true
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      responses:
        200:
          description: OK
  
  /contribution:
    post:
      tags:
      - Paper Submit Service
      summary: "submit articles"
      parameters:
      - name: 'body'
        in: 'body'
        schema:
          type: "object"
          properties:
            templateFile:
              type: "object"
            articleName:
              type: "string"
            author:
              type: "string"
            summary: 
              type: "string"
            topics:
              type: "array"
              items:
                $ref: '#/definitions/Topic/properties/id'
            username:
              type: "string"
            meetingId:
              type: "string"
      responses:
        200:
          description: OK
          
  /author:
    get:
      tags:
      - Paper Submit Service
      summary: "get all articles of yourself"
      parameters:
      - name: "username"
        type: "string"
        in: "query"
        required: true
      - name: "meetingId"
        type: "string"
        in: "query"
        required: true
      responses:
        200:
          description: OK
          schema:
            type: "array"
            items:
              $ref: '#/definitions/Article'
  
  /authorRebuttal:
    post:
      tags:
      - Rebuttal Service
      summary: 'author rebuttal this article'
      parameters:
      - name: 'body'
        in: 'body'
        schema:
          type: "object"
          properties:
            reason: 
              type: string
            username:
              type: "string"
            meetingId:
              type: string
            articleId:
              type: string
            isRebuttaled:
              type: string
      responses:
        200:
          description: OK
          
  /register:
    post:
      tags:
      - Register Login Service
      summary: 'register'
      parameters:
      - name: 'body'
        in: 'body'
        schema:
          type: object
          properties:
            username:
              type: string
            fullname:
              type: string
            password:
              type: string
            checkPassword:
              type: string
            e_mail:
              type: string
            companie:
              type: string
            area:
              type: string
      responses:
        200:
          description: OK
    
  /login:
    post:
      tags:
      - Register Login Service
      summary: "login"
      parameters:
      - name: 'body'
        in: 'body'
        schema:
          type: object
          properties:
            username: 
              type: string
            password:
              type: string
      responses:
        200:
          description: OK
    
  /finalPublishScores:
    get:
      tags:
      - Release Final Result Service
      summary: "release result"
      parameters:
      - name: "meetingId"
        in: "query"
        type: string
      responses:
        200:
          description: OK
          schema:
            type: string
  
  /firstPublishScores:
    get:
      tags:
      - Release First Result Service
      summary: "release result"
      parameters:
      - name: "meetingId"
        in: "query"
        type: string 
      responses:
        200:
          description: OK
          
  /changeSubmitStatus:
    get:
      tags:
      - Start Submit Service
      parameters:
      - name: "meetingID"
        in: "query"
        type: string
      - name: "submitStatus"
        in: "query"
        type: string
      responses:
        200:
         description: OK
         schema:
           type: string
    
  
definitions:
  Article:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      articleName:
        type: "string"
      summary:
        type: "string"
      filePath:
        type: "string"
      contributor:
        type: "string"
      meetingId:
        type: "string"
      reviewStatus:
        type: "string"
      isAccepted:
        type: "string"
      rebuttal:
        type: "string"
      topics:
        type: "array"
        items:
          $ref: "#/definitions/Article"
      authors:
        type: "array"
        items:
          $ref: "#/definitions/Author"
      scores:
        type: "array"
        items:
          $ref: "#/definitions/Score"
      pcmembers:
        type: "array"
        items:
          $ref: "#/definitions/User"

  Authority:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      authority:
        type: "string"
      user:
          $ref: "#/definitions/User"
      meeting:
          $ref: "#/definitions/Meeting"
      
  Meeting:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      shortenForm:
        type: "string"
      fullName:
        type: "string"
      time:
        type: "string"
      location:
        type: "string"
      ddl:
        type: "string"
      publishingTime:
        type: "string"
      applicant:
        type: "string"
      isVarified:
        type: "string"
      submitStatus:
        type: "string"
      authorities:
        type: "array"
        items: 
          $ref: "#/definitions/Authority"

  Topic:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      topic:
        type: "string"
      article:
          $ref: "#/definitions/Article"
  
  Author:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      name: 
        type: "string"
      email: 
        type: "string"
      company: 
        type: "string"
      area: 
        type: "string"
      orderOfAuthor: 
        type: "integer"
      article1: 
        $ref: "#/definitions/Article"
        
  Invitation:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      inviter:
        type: "string"
      invitee:
        type: "string"
      meetingId:
        type: "string"
      invitationStatus:
        type: "string"
  
  Main_Discussion:
    type: "object"
    properties:
      mainId:
        type: "integer"
        format: "long"
      content:
        type: "string"
      username:
        type: "string"
      articleId:
        type: "string"
      createTime:
        type: "string"
      discussStatus:
        type: "string"
      sub_discussions:
        type: "array"
        items:
          $ref:  "#/definitions/Sub_Discussion"
  
  Sub_Discussion:
    type: "object"
    properties:
      subId:
        type: "integer"
        format: "long"
      fatherId:
        type: "string"
      content:
        type: "string"
      username:
        type: "string"
      articleId:
        type: "string"
      createTime:
        type: "string"
      discussStatus:
        type: "string"
      reviewee:
        type: "string"
      main_discussion:
        $ref:  "#/definitions/Main_Discussion"
  
  Score:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      pcmember_id:
        type: "integer"
        format: "long"
      score:
        type: "string"
      comment:
        type: "string"
      confidence:
        type: "string"
      reviewStatus:
        type: "string"
      modifyStatus:
        type: "string"
      oldId:
        type: "string"
      article2: 
        $ref: "#/definitions/Article"
    
  User:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      username:
        type: "string"
      fullName:
        type: "string"
      password:
        type: "string"
      e_mail:
        type: "string"
      companie:
        type: "string"
      area:
        type: "string"
      authorities:
        type: "array"
        items: 
          $ref: "#/definitions/Authority"
      articles:
        type: "array"
        items: 
          $ref: "#/definitions/Article"
          
  TopicPcMeetingArticle:
    type: "object"
    properties:
      id:
        type: "integer"
        format: "long"
      topic:
        $ref: "#/definitions/Topic"
      pcmember:
        $ref: "#/definitions/User"
      meeting:
        $ref: "#/definitions/Meeting"
    
    
    
    